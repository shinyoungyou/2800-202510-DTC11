<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Scan page</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>.allergen-ai span{color:#ca8a04;font-weight:500}</style>
</head>
<body class="bg-black flex flex-col h-screen text-white">

  <!-- camera viewport (unchanged) -->
  <div class="relative flex-1 overflow-hidden">
    <video id="video" autoplay playsinline class="w-full h-full object-cover"></video>

    <!-- Four corner guides -->    
    <div class="absolute inset-0 pointer-events-none flex items-center justify-center">
      <div class="relative w-3/4 max-w-[22rem] aspect-square">
        <div class="absolute top-0    left-0   w-10 h-10 border-t-4 border-l-4 border-white"></div>
        <div class="absolute top-0    right-0  w-10 h-10 border-t-4 border-r-4 border-white"></div>
        <div class="absolute bottom-0 left-0   w-10 h-10 border-b-4 border-l-4 border-white"></div>
        <div class="absolute bottom-0 right-0  w-10 h-10 border-b-4 border-r-4 border-white"></div>
      </div>
      <!-- Detected barcode bounding box -->
      <div id="barcode-box" class="absolute border-2 border-green-400 hidden"></div>
    </div>
  </div>

  <!-- bottom sheet (collapsed by default) -->
  <div id="bottom-sheet"
       class="bg-white text-black w-full
              transition-all duration-300
              h-24   /* collapsed height */
              overflow-hidden">
    <!-- handle -->
    <div class="w-full flex justify-center py-1">
      <div class="w-12 h-1.5 bg-gray-300 rounded"></div>
    </div>

    <!-- collapsed summary row -->
    <div id="summary-row" class="flex items-center px-4 space-x-4">
    <!-- thumbnail -->
    <img id="prod-thumb"
         class="w-16 h-16 rounded object-cover bg-gray-300 flex-shrink-0"/>
      <div class="flex-1">
        <p id="prod-name"  class="font-semibold leading-tight truncate">Chocolate milk</p>
        <p id="prod-brand" class="text-sm text-gray-500 truncate">Brand #3</p>
        <p id="prod-tags"  class="text-xs text-gray-400 truncate">#Peanuts  #Milk</p>
      </div>
    </div>

    <!-- expanded details -->
    <div id="details" class="px-4 pt-4 space-y-4">
      <h3 class="font-semibold">Allergens</h3>
      <ul id="allergens-list" class="divide-y divide-gray-200"></ul>
    </div>

    <!-- Alternatives section (UI-only) -->
    <div id="details" class="px-4 pt-4 space-y-4">
       <!-- header -->
    <div class="flex items-baseline justify-between mb-3">
      <h3 class="font-semibold">Alternatives</h3>
      <button class="text-sm text-blue-600 whitespace-nowrap">See all</button>
    </div>

    <!-- horizontal rail -->
    <ul id="alt-list"
        class="flex overflow-x-auto pb-2
               space-x-8          /* 32 px gaps (roomier) */
               snap-x snap-mandatory
               scrollbar-hide">   <!-- hide iOS/Chrome scrollbar -->

        <!-- card 1 (placeholder) -->
        <li class="flex-shrink-0 snap-start w-56"> <!-- ~256 px card -->
          <div class="flex space-x-4">
            <div class="w-20 h-20 bg-gray-300 rounded flex-shrink-0"></div>
            <div class="flex flex-col justify-center min-w-0">
              <p class="font-medium truncate">Product #1</p>
              <p class="text-xs text-gray-500 truncate">Brand #1</p>
              <p class="text-xs text-gray-400 truncate">#Sesame</p>
            </div>
          </div>
        </li>

        <!-- card 2 (placeholder) -->
        <li class="flex-shrink-0 snap-start w-56">
          <div class="flex space-x-4">
            <div class="w-20 h-20 bg-gray-300 rounded flex-shrink-0"></div>
            <div class="flex flex-col justify-center min-w-0">
              <p class="font-medium truncate">Product #2</p>
              <p class="text-xs text-gray-500 truncate">Brand #2</p>
              <p class="text-xs text-gray-400 truncate">#Peanuts</p>
            </div>
          </div>
        </li>

    <!-- add more <li> cards or let JS inject them later -->
    </ul>
    </div>
  </div>

  <!-- bottom navigation -->
  <nav class="h-16 bg-white flex justify-around items-center text-black">
    <a href="home_page.html" class="flex flex-col items-center text-gray-500">
      <img src="icons/history-outlined.png" alt="home" class="w-6 h-6 mb-1 object-contain" />
      <span class="text-xs">Home</span>
    </a>
    <button class="flex flex-col items-center text-blue-600 scan-nav">
      <img src="icons/scan-outlined.png" alt="scan" class="w-6 h-6 mb-1 object-contain" />
      <span class="text-xs">Scan</span>
    </button>
    <button class="flex flex-col items-center text-gray-500">
      <img src="icons/profile-outlined.png" alt="profile" class="w-6 h-6 mb-1 object-contain" />
      <span class="text-xs">Profile</span>
    </button>
  </nav>

  <script src="https://unpkg.com/@zxing/library@latest/umd/index.min.js"></script>
  <script src="scan.js"></script>
  <script src="history.js"></script>
</body>
</html>
